// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id                String             @id @default(uuid()) @db.Uuid
  nome              String
  papel             String
  avaliacoesPessoais AvaliacaoPessoal[]

  @@map("usuarios")
}

model Sprint {
  id                String               @id @default(uuid()) @db.Uuid
  numero            Int
  dataInicio        DateTime             @map("data_inicio")
  dataFim           DateTime             @map("data_fim")
  encerramentoStatus String              @map("encerramento_status")
  avaliacoesPessoais AvaliacaoPessoal[]
  avaliacaoScrumMaster AvaliacaoScrumMaster?

  @@map("sprints")
}

model AvaliacaoPessoal {
  id                     String   @id @default(uuid()) @db.Uuid
  usuario               Usuario  @relation(fields: [idUsuario], references: [id])
  idUsuario             String   @map("id_usuario") @db.Uuid
  sprint                Sprint   @relation(fields: [idSprint], references: [id])
  idSprint              String   @map("id_sprint") @db.Uuid
  produtividade         Int
  climaEquipe           Int      @map("clima_equipe")
  comunicacao           Int
  objetivosClaros       Int      @map("objetivos_claros")
  teveBloqueios         Int      @map("teve_bloqueios")
  queFuncionou          String   @map("o_que_funcionou")
  queNaoFuncionou       String   @map("o_que_nao_funcionou")
  sugestoesProximaSprint String   @map("sugestoes_proxima_sprint")
  comentariosAdicionais String?  @map("comentarios_adicionais")

  @@map("avaliacoes_pessoais")
}

model AvaliacaoScrumMaster {
  id                    String   @id @default(uuid()) @db.Uuid
  sprint               Sprint   @relation(fields: [idSprint], references: [id])
  idSprint             String   @unique @map("id_sprint") @db.Uuid
  pontosPlanejados     Int      @map("pontos_planejados")
  pontosEntregues      Int      @map("pontos_entregues")
  tarefasPlanejadas    Int      @map("tarefas_planejadas")
  tarefasConcluidas    Int      @map("tarefas_concluidas")
  tarefasPendentes     Int      @map("tarefas_pendentes")
  bugsIdentificados    Int      @map("bugs_identificados")
  bugsResolvidos       Int      @map("bugs_resolvidos")
  houveEntrega         String   @map("houve_entrega")
  observacoesGerais    String   @map("observacoes_gerais")
  principaisImpedimentos String  @map("principais_impedimentos")
  melhoriasImplementadas String  @map("melhorias_implementadas")

  @@map("avaliacoes_scrum_master")
} 